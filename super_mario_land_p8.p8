pico-8 cartridge // http://www.pico-8.com
version 43
__lua__
function _init()

	-- enable mouse controlls --
	poke(0x5f2d, 1)
	
	mario = make_player(64,64)
end

function _update()
	-- mouse position
	mpos_x = stat(32)
	mpos_y = stat(33)

	-- mario
	mario:update()
end

function _draw()
	cls(12) -- clear, fill blue (sky)

	-- mouse cursor
	spr(1,mpos_x,mpos_y)

	print("x: "..mario.x.." y: "..mario.y, 4, 4, 7)
	mario:draw()
end

function make_player(x, y)
	local p = {}
	p.x = x -- position x
	p.y = y -- position y
	p.sp = 1 -- sprite id
	p.spd = 3.5 -- walking speed
	p.flip_x = false

	p.update = function (self)
		-- left movement
		if btn (0) then
			self.x -= self.spd
			self.flip_x = true
		end
		-- right movement
		if btn(1) then
			self.x += self.spd
			self.flip_x = false
		end
		-- down movement
		if btn(2) then
			self.y -= self.spd
		end
		-- up movement
		if btn(3) then
			self.y += self.spd
		end
	end
	p.draw = function(self)
		-- spr(id, xx, y, width, height, flix_x) 
		spr(self.sp, self.x, self.y, 1, 1,  self.flip)
	end
	return p
end


__gfx__
00000000008888800088870088188188000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000044f1f000888888888911988000000000000000000000000000000000000000000000000000000000666666666555000000000000000000000000000
0070070004fffff0044f1ff077111177000000000000000000000000000000000000000000000000000000000666666666555000000000000000000000000000
00077000004fff004f4fffff67111176000000000000000000000000000000000000000000000000000000000666666666555000000000000000000000000000
00077000088181804fff444401111110000000000000000000000000000000000000000000000000000000000666666666555000000000000000000000000000
007007000719197004fffff001100110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000111100001881000440044000000000000000000000000000000000000000000000000000000000c06666666665500c000000000000000000000000
0000000004400440081881804440044400000000000000000000000000000000000000000000000000000000c06666666665500c000000000000000000000000
0000000001111110011111100111111001111110000000000000000000000000000000000000000000000000c06666666665500c000000000000000000000000
0000000019944991199999911999991117777711000000000000000000000000000000000000000000000000c06666666665500c000000000000000000000000
0000000019499491199999911911191117711111000000000000000000000000000000000000000000000000c06666666665500c000000000000000000000000
0000000019994491199999911919991117711111000000000000000000000000000000000000000000000000c06666666665500c000000000000000000000000
0000000019944991199999911919991117711111000000000000000000000000000000000000000000000000cc000000000000cc000000000000000000000000
0000000019999991199999911999911111111111000000000000000000000000000000000000000000000000c06666666665500c000000000000000000000000
0000000019944991199999911111111111111111000000000000000000000000000000000000000000000000c06666666665500c000000000000000000000000
0000000001111110011111100111111001111110000000000000000000000000000000000000000000000000c06666666665500c000000000000000000000000
00000000001111000011100000333330001111000000000000000000c000000cc000000c000000c00000c000006666666665500c000000000000000000000000
000000000177771001aaa10003788873011aa110000000000000000006666600077000000666600666660666600666666665500c000000000000000000000000
00000000177777711aa7aa100377777301aa1110000000000000000006666600000000000666606666660666660066666665500c000000000000008880000000
00000000177777711a771a100033333001aa1110000000000000000006666000c067660c0666606666660666666066666665500c000000000000088888880000
00000000111111111a771a100000300001aa11100000000000000000c000000cc067660c066660666666066666600000000000cc000000000000444ff1f00000
00000000017777101aa1aa100330303301aa11100000000000000000cccccccc000000000666606666660666666006666665500c0000000000044f44ffff0000
000000000177771001aaa10000333330011aa1100000000000000000cccccccc077000000666606666660666666006666665500c0000000000044ffff44f0000
00000000001111000011100000033300001111000000000000000000ccccccccc000000c0666606666660666666006666665500c0000000000000ffffff00000
0000000000000000cccccccc00111110cccccccccccccccc0000000000000000000000000666606666660666666606666665500c000000000000881881000000
00000000000a0000c11c111c01177711cccccccccc0000cc0000000007777777777777000666606666660666666606666665500c000000000008881881880000
00000000000a00001781881101111111ccc0000cc007700c0000000007666666666666000666606666660666666606666665500c00000000000ff8a11a88f000
00000000aaaaaaa01788881100111110c0007700c070000c0000000007670666666706000555506666660666666606666665500c00000000000ff111111ff000
000000000aaaaa00188888110000100000000000c070000c000000000760066666600600055550555555055555000000000000cc000000000000044004400000
0000000000aaa000c188811c01101011c0000000c000000c0000000007666666666666000000005555550555500066666665500c000000000000444004440000
000000000aaaaa00cc1811cc00111110ccc0000ccc0000cc0000000000000000000000000000000000000000000666666665500c000000000000000000000000
00000000aa000aa0ccc11ccc00011100cccccccccccccccc000000000000000000000000000000c00000c000006666666665500c000000000000000000000000
00000000ff000000000000ff000000000000000000000000000000000000000000000000f00000000000000f0000000000000000000000000000000000000000
77777777f00000000000000f06600660000000000000000000000000000000000000000000666666666666000000000000000000000000000000000000000000
00000000006606666606600006600660000000000000000000000000000000000000000006066666666660000000000000000000000000000000000000000000
00000000066666606666660006600660000000000000000000000000000000000000000006600000000006000000000000000000000000000000000000000000
00000000066066666660660000000000000000000000000000000000000000000000000006600666666006000000000000000000000000000000000000000000
666606660066606660666000ffffffff000000000000000000000000000000000000000006606066660006000000000000000000000000000000000000000000
606666660000000000000000ffffffff000000000000000000000000000000000000000006606600006006000000000000000000000000000000000000000000
666066600000000000000000ffffffff000000000000000000000000000000000000000006606606006006000000000000000000000000000000000000000000
66666666000000000000000000000000000000000000000000000000000000000000000006606600006006000000000000000000000000000000000000000000
66666666000000000000000066066606000000000000000000000000000000000000000006606600006006000000000000000000000000000000000000000000
00000000000000000000000066066606000000000000000000000000000000000000000006606066660006000000000000000000000000000000000000000000
55555555000000000000000066066606000000000000000000000000000000000000000006600000000006000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000006600000000006000000000000000000000000000000000000000000
55555555000000000000000006660666000000000000000000000000000000000000000006066666666660000000000000000000000000000000000000000000
00000000000000000000000006660666000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000066606660000000000000000000000000000000000000000f00000000000000f0000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000f00000000000000f0000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000666666666666000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000006066666666660000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000006600000000006000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000006600666666006000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000006606066660006000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000660660006606606665566600070007000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000006600060066000600000000000070007000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000006665566600070007000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000600000006000000000000000070007000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000066600066666000666665566600070007000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000060006666600066660000000000070007000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000066000000660006665566677777777000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000077777777000000000000000000000000
